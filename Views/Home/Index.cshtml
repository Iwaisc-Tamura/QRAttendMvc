@{
    Layout = null;
    ViewData["Title"] = "協力会社入退場記録システム";
}

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>

    <!-- Bootstrap -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />

    <!-- 共通CSS -->
    <link rel="stylesheet" href="~/css/site.css" />
</head>

<body class="index-menu">
    <div class="container-fluid">
        <div class="card">

            <!-- 緑ヘッダー：左（タイトル/ボタン）＋右（ログイン/時計） -->
            <div class="menu-header bg-success text-white py-3 px-4">

                <!-- 左側 -->
                <div class="menu-header-left">
                    <div class="fw-bold fs-5">
                        協力会社入退場記録システムメニュー
                    </div>

                    <form asp-controller="TestUtility"
                          asp-action="UpdateTodayEventDate"
                          method="post"
                          class="mt-3"
                          onsubmit="return confirm('テスト用処理です。\n開催日を本日に更新します。\nよろしいですか？');">
                        <button type="submit" class="btn btn-warning fw-bold">
                            【テスト用】開催日を本日に更新
                        </button>
                    </form>
                </div>

                <!-- 右側：ログイン／日時（1つだけ） -->
                @{
                    var b = Context?.Session?.GetString("BRANCH_CD") ?? "";
                    var e = Context?.Session?.GetString("EMPLOYEE_CD") ?? "";
                    var login = (!string.IsNullOrEmpty(b) && !string.IsNullOrEmpty(e))
                    ? $"{b}-{e}"
                    : "XXXXX-YYYYY";
                }
                <div class="menu-header-right text-end layout-clock">
                    <div class="layout-login">
                        ログイン&nbsp;&nbsp;@login
                    </div>
                    <div class="layout-datetime">
                        <span id="layoutDateTime"></span>
                    </div>
                </div>
            </div>

            <!-- 白いメイン領域（画面いっぱい） -->
            <main class="menu-main">
                <div class="text-center">
                    <h2 class="fw-bold mb-5">
                        入退場記録メインメニュー
                    </h2>

                    <a asp-controller="EventSelection"
                       asp-action="Index"
                       class="btn btn-primary btn-lg px-5 py-4 fw-bold menu-btn"
                       style="font-size:1.5rem; min-width:280px;">
                        イベント選択
                    </a>
                </div>
            </main>

        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- 右上時計（1つだけ表示） -->
    <script>
        function updateLayoutClock() {
            const d = new Date();
            const pad = n => n.toString().padStart(2, '0');

            const week = ["(日)", "(月)", "(火)", "(水)", "(木)", "(金)", "(土)"];
            const w = week[d.getDay()];

            const date =
                d.getFullYear() + "/" +
                pad(d.getMonth() + 1) + "/" +
                pad(d.getDate());

            const time =
                pad(d.getHours()) + ":" +
                pad(d.getMinutes()) + ":" +
                pad(d.getSeconds());

            const text = `${date} ${w} ${time}`;

            const el = document.getElementById("layoutDateTime");
            if (el) el.textContent = text;
        }

        updateLayoutClock();
        setInterval(updateLayoutClock, 1000);
    </script>
</body>
</html>