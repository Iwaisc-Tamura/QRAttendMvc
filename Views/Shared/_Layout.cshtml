
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - 協力会社入退場記録システム</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" />
    <link rel="stylesheet" href="~/css/entryexit-batch.css" />

</head>
<body>
    <div class="container-fluid p-0">
        <header class="bg-success text-white py-1 px-4 mb-2">
            @* <h1 class="h5 mb-0">協力会社入退場記録システム</h1> *@
            <div class="d-flex align-items-center justify-content-between">
                <!-- ロゴ画像とシステム名 -->
                <div class="d-flex align-items-center">
                    <img src="~/img/SysTitle.png"
                         alt="JS 協力会社 入退場記録システム ロゴ"
                         style="height:60px;" />
                </div>

                <!-- 右上：ログイン/日付/時刻 -->

                @{
                    var b = Context?.Session?.GetString("BRANCH_CD") ?? "";
                    var e = Context?.Session?.GetString("EMPLOYEE_CD") ?? "";
                    var login = (!string.IsNullOrEmpty(b) && !string.IsNullOrEmpty(e))
                    ? $"{b}-{e}"
                    : "XXXXX-YYYYY";
                }
                <div class="text-end layout-clock">
                    <div class="layout-login">
                        ログイン&nbsp;&nbsp;@login
                    </div>
                    <div class="layout-datetime">
                        <span id="layoutDateTime" class="fw-bold"></span>
                        <span id="layoutDate"></span>
                        <span id="layoutWeek"></span>
                        <span id="layoutTime"></span>
                    </div>

                </div>
            </div>
        
        </header>

        @{
            var controllerName = ViewContext.RouteData.Values["controller"]?.ToString();
        }

        @* EventSelection title (same style as Entry/Exit batch) *@

		<main class="container mb-4">
            @{
                var err = Context?.Session?.GetString("DEBUG_LOGIN_ERROR");
            }
            @if (!string.IsNullOrEmpty(err))
            {
                <div class="alert alert-warning mt-2" role="alert">@err</div>
            }
            @RenderBody()
        </main>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    @RenderSection("Scripts", required: false)
    <script>
        function updateLayoutClock() {
            const d = new Date();
            const pad = n => n.toString().padStart(2, '0');

            // 曜日（英語3文字）
            //const week = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
             const week = ["(日)", "(月)", "(火)", "(水)", "(木)", "(金)", "(土)"];
            const w = week[d.getDay()];

            const date =
                d.getFullYear() + "/" +
                pad(d.getMonth() + 1) + "/" +
                pad(d.getDate());

            const time =
                pad(d.getHours()) + ":" +
                pad(d.getMinutes()) + ":" +
                pad(d.getSeconds());

            const text = `${date} ${w} ${time}`;

            const el = document.getElementById("layoutDateTime");
            if (el) el.textContent = text;
        }

        updateLayoutClock();
        setInterval(updateLayoutClock, 1000);
    </script>

</body>
</html>
